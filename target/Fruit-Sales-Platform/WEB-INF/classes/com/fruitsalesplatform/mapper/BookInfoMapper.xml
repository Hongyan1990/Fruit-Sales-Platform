<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fruitsalesplatform.dao.BookInfoMapper">
    <resultMap type="com.fruitsalesplatform.po.BookInfo" id="bookResultMap">
        <id column="bookid" property="bookId" />
        <result column="cid" property="cId" />
        <result column="bookname" property="bookName" />
        <result column="author" property="author" />
        <result column="publish" property="publish" />
        <result column="introdution" property="introdution" />
        <result column="img" property="img" />
        <association property="booktype" javaType="com.fruitsalesplatform.po.BookTypeInfo" >
            <id column="cid" property="cId" />
            <result column="cname" property="cName" />
            <result column="intr" property="intr" />
        </association>
    </resultMap>
    <!-- 根据uid查询用户 -->
    
    <select id="selectAllBooks" parameterType="java.util.HashMap" resultMap="bookResultMap">
        select * from book 
        where
           <if test="bookid != null">
               and bookid=#{bookid}
           </if>
    </select>
    <select id="selectBookById" parameterType="int" resultMap="bookResultMap">
        select 
            b.bookid, 
            b.cid, 
            b.bookname, 
            b.author, 
            b.publish, 
            b.introdution, 
            b.img,
            c.cname,
            c.intr
         from 
            book b left outer join bookclass c b.cid=c.cid
         where 
            b.bookid = #{bookid}
    </select>
</mapper>